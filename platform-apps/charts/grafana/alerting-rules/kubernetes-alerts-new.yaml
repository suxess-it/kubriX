apiVersion: 1
groups:
    - orgId: 1
      name: kube-apiserver-slos
      folder: jkleinlerchertest/prometheus_alerts.yaml
      interval: 1m
      rules:
        - uid: 498a2f5e-ee44-57b9-9f65-c933c9230bab
          title: KubeAPIErrorBudgetBurn
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum by(cluster) (apiserver_request:burnrate1h) > (14.40 * 0.01000)
                    and on(cluster)
                    sum by(cluster) (apiserver_request:burnrate5m) > (14.40 * 0.01000)
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 2m
          annotations:
            description: The API server is burning too much error budget.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn
            summary: The API server is burning too much error budget.
          labels:
            __converted_prometheus_rule__: "true"
            long: 1h
            severity: critical
            short: 5m
          isPaused: false
          missing_series_evals_to_resolve: 1
        - uid: 9d82d124-7f58-551b-a954-e2ee70b714bc
          title: KubeAPIErrorBudgetBurn
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum by(cluster) (apiserver_request:burnrate6h) > (6.00 * 0.01000)
                    and on(cluster)
                    sum by(cluster) (apiserver_request:burnrate30m) > (6.00 * 0.01000)
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: The API server is burning too much error budget.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn
            summary: The API server is burning too much error budget.
          labels:
            __converted_prometheus_rule__: "true"
            long: 6h
            severity: critical
            short: 30m
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: ed49e5ce-1514-591a-adda-c8d1140a0c51
          title: KubeAPIErrorBudgetBurn
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum by(cluster) (apiserver_request:burnrate1d) > (3.00 * 0.01000)
                    and on(cluster)
                    sum by(cluster) (apiserver_request:burnrate2h) > (3.00 * 0.01000)
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 1h
          annotations:
            description: The API server is burning too much error budget.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn
            summary: The API server is burning too much error budget.
          labels:
            __converted_prometheus_rule__: "true"
            long: 1d
            severity: warning
            short: 2h
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 9afd0b4e-10a7-5bfb-8c03-fceb5fe495db
          title: KubeAPIErrorBudgetBurn
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum by(cluster) (apiserver_request:burnrate3d) > (1.00 * 0.01000)
                    and on(cluster)
                    sum by(cluster) (apiserver_request:burnrate6h) > (1.00 * 0.01000)
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 3h
          annotations:
            description: The API server is burning too much error budget.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapierrorbudgetburn
            summary: The API server is burning too much error budget.
          labels:
            __converted_prometheus_rule__: "true"
            long: 3d
            severity: warning
            short: 6h
          isPaused: true
          missing_series_evals_to_resolve: 1
    - orgId: 1
      name: kubernetes-apps
      folder: jkleinlerchertest/prometheus_alerts.yaml
      interval: 1m
      rules:
        - uid: a27509cd-a61b-5509-8d71-c7927e48f2a5
          title: KubePodCrashLooping
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    max_over_time(kube_pod_container_status_waiting_reason{reason="CrashLoopBackOff", job="kube-state-metrics"}[5m]) >= 1
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: 'Pod {{ $labels.namespace }}/{{ $labels.pod }} ({{ $labels.container }}) is in waiting state (reason: "CrashLoopBackOff").'
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepodcrashlooping
            summary: Pod is crash looping.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: b3918d6d-59e3-5d20-a0b2-c739a503173f
          title: KubePodNotReady
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum by (namespace, pod, cluster) (
                      max by(namespace, pod, cluster) (
                        kube_pod_status_phase{job="kube-state-metrics", phase=~"Pending|Unknown|Failed"}
                      ) * on(namespace, pod, cluster) group_left(owner_kind) topk by(namespace, pod, cluster) (
                        1, max by(namespace, pod, owner_kind, cluster) (kube_pod_owner{owner_kind!="Job"})
                      )
                    ) > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Pod {{ $labels.namespace }}/{{ $labels.pod }} has been in a non-ready state for longer than 15 minutes.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepodnotready
            summary: Pod has been in a non-ready state for more than 15 minutes.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 6d8f3cc5-8fec-57ad-abda-4ba65150348f
          title: KubeDeploymentGenerationMismatch
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_deployment_status_observed_generation{job="kube-state-metrics"}
                      !=
                    kube_deployment_metadata_generation{job="kube-state-metrics"}
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Deployment generation for {{ $labels.namespace }}/{{ $labels.deployment }} does not match, this indicates that the Deployment has failed but has not been rolled back.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentgenerationmismatch
            summary: Deployment generation mismatch due to possible roll-back
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: cc0cf33d-0e2c-5cb3-a399-881e7d9364fc
          title: KubeDeploymentReplicasMismatch
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (
                      kube_deployment_spec_replicas{job="kube-state-metrics"}
                        >
                      kube_deployment_status_replicas_available{job="kube-state-metrics"}
                    ) and (
                      changes(kube_deployment_status_replicas_updated{job="kube-state-metrics"}[10m])
                        ==
                      0
                    )
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Deployment {{ $labels.namespace }}/{{ $labels.deployment }} has not matched the expected number of replicas for longer than 15 minutes.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentreplicasmismatch
            summary: Deployment has not matched the expected number of replicas.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: f511ed7b-1446-5847-a83c-cf81177cac36
          title: KubeDeploymentRolloutStuck
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_deployment_status_condition{condition="Progressing", status="false",job="kube-state-metrics"}
                    != 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Rollout of deployment {{ $labels.namespace }}/{{ $labels.deployment }} is not progressing for longer than 15 minutes.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedeploymentrolloutstuck
            summary: Deployment rollout is not progressing.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 199a7ad7-1eca-5ca7-b796-6ca1e000cef9
          title: KubeStatefulSetReplicasMismatch
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (
                      kube_statefulset_status_replicas_ready{job="kube-state-metrics"}
                        !=
                      kube_statefulset_replicas{job="kube-state-metrics"}
                    ) and (
                      changes(kube_statefulset_status_replicas_updated{job="kube-state-metrics"}[10m])
                        ==
                      0
                    )
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} has not matched the expected number of replicas for longer than 15 minutes.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetreplicasmismatch
            summary: StatefulSet has not matched the expected number of replicas.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 387c52bf-4dcc-5768-9904-cc4b51e0a93a
          title: KubeStatefulSetGenerationMismatch
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_statefulset_status_observed_generation{job="kube-state-metrics"}
                      !=
                    kube_statefulset_metadata_generation{job="kube-state-metrics"}
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: StatefulSet generation for {{ $labels.namespace }}/{{ $labels.statefulset }} does not match, this indicates that the StatefulSet has failed but has not been rolled back.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetgenerationmismatch
            summary: StatefulSet generation mismatch due to possible roll-back
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 5674e87c-6f49-5ad1-9fef-c435438c153b
          title: KubeStatefulSetUpdateNotRolledOut
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (
                      max by(namespace, statefulset, job, cluster) (
                        kube_statefulset_status_current_revision{job="kube-state-metrics"}
                          unless
                        kube_statefulset_status_update_revision{job="kube-state-metrics"}
                      )
                        * on(namespace, statefulset, job, cluster)
                      (
                        kube_statefulset_replicas{job="kube-state-metrics"}
                          !=
                        kube_statefulset_status_replicas_updated{job="kube-state-metrics"}
                      )
                    )  and on(namespace, statefulset, job, cluster) (
                      changes(kube_statefulset_status_replicas_updated{job="kube-state-metrics"}[5m])
                        ==
                      0
                    )
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: StatefulSet {{ $labels.namespace }}/{{ $labels.statefulset }} update has not been rolled out.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubestatefulsetupdatenotrolledout
            summary: StatefulSet update has not been rolled out.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 9f83fd00-6fb4-583a-b99c-1dde5fbd02d5
          title: KubeDaemonSetRolloutStuck
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (
                      (
                        kube_daemonset_status_current_number_scheduled{job="kube-state-metrics"}
                         !=
                        kube_daemonset_status_desired_number_scheduled{job="kube-state-metrics"}
                      ) or (
                        kube_daemonset_status_number_misscheduled{job="kube-state-metrics"}
                         !=
                        0
                      ) or (
                        kube_daemonset_status_updated_number_scheduled{job="kube-state-metrics"}
                         !=
                        kube_daemonset_status_desired_number_scheduled{job="kube-state-metrics"}
                      ) or (
                        kube_daemonset_status_number_available{job="kube-state-metrics"}
                         !=
                        kube_daemonset_status_desired_number_scheduled{job="kube-state-metrics"}
                      )
                    ) and (
                      changes(kube_daemonset_status_updated_number_scheduled{job="kube-state-metrics"}[5m])
                        ==
                      0
                    )
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} has not finished or progressed for at least 15m.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetrolloutstuck
            summary: DaemonSet rollout is stuck.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 4cc08a5b-ccf9-5695-823f-a0d9fa00f9dd
          title: KubeContainerWaiting
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_pod_container_status_waiting_reason{reason!="CrashLoopBackOff", job="kube-state-metrics"} > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 1h
          annotations:
            description: 'pod/{{ $labels.pod }} in namespace {{ $labels.namespace }} on container {{ $labels.container}} has been in waiting state for longer than 1 hour. (reason: "{{ $labels.reason }}").'
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecontainerwaiting
            summary: Pod container waiting longer than 1 hour
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: a1e4b564-d949-52e3-a11f-c86c86408cdd
          title: KubeDaemonSetNotScheduled
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_daemonset_status_desired_number_scheduled{job="kube-state-metrics"}
                      -
                    kube_daemonset_status_current_number_scheduled{job="kube-state-metrics"} > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 10m
          annotations:
            description: '{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} are not scheduled.'
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetnotscheduled
            summary: DaemonSet pods are not scheduled.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: adccee4b-4ab8-57d7-b202-4f62b1ab2407
          title: KubeDaemonSetMisScheduled
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_daemonset_status_number_misscheduled{job="kube-state-metrics"} > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: '{{ $value }} Pods of DaemonSet {{ $labels.namespace }}/{{ $labels.daemonset }} are running where they are not supposed to run.'
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubedaemonsetmisscheduled
            summary: DaemonSet pods are misscheduled.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 9f5a6cd7-bfc0-5f62-a179-742161443a9b
          title: KubeJobNotCompleted
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    time() - max by(namespace, job_name, cluster) (kube_job_status_start_time{job="kube-state-metrics"}
                      and
                    kube_job_status_active{job="kube-state-metrics"} > 0) > 43200
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          annotations:
            description: Job {{ $labels.namespace }}/{{ $labels.job_name }} is taking more than {{ "43200" | humanizeDuration }} to complete.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubejobnotcompleted
            summary: Job did not complete in time
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 355a0e98-e85f-5695-a4b8-cd309d5724fb
          title: KubeJobFailed
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_job_failed{job="kube-state-metrics"}  > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Job {{ $labels.namespace }}/{{ $labels.job_name }} failed to complete. Removing failed job after investigation should clear this alert.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubejobfailed
            summary: Job failed to complete.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 5192e271-d2e9-5c48-8864-e0dc2743aeb3
          title: KubeHpaReplicasMismatch
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (kube_horizontalpodautoscaler_status_desired_replicas{job="kube-state-metrics"}
                      !=
                    kube_horizontalpodautoscaler_status_current_replicas{job="kube-state-metrics"})
                      and
                    (kube_horizontalpodautoscaler_status_current_replicas{job="kube-state-metrics"}
                      >
                    kube_horizontalpodautoscaler_spec_min_replicas{job="kube-state-metrics"})
                      and
                    (kube_horizontalpodautoscaler_status_current_replicas{job="kube-state-metrics"}
                      <
                    kube_horizontalpodautoscaler_spec_max_replicas{job="kube-state-metrics"})
                      and
                    changes(kube_horizontalpodautoscaler_status_current_replicas{job="kube-state-metrics"}[15m]) == 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: HPA {{ $labels.namespace }}/{{ $labels.horizontalpodautoscaler  }} has not matched the desired number of replicas for longer than 15 minutes.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubehpareplicasmismatch
            summary: HPA has not matched desired number of replicas.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 16d741db-868e-5543-a421-646c5f137fcb
          title: KubeHpaMaxedOut
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_horizontalpodautoscaler_status_current_replicas{job="kube-state-metrics"}
                      ==
                    kube_horizontalpodautoscaler_spec_max_replicas{job="kube-state-metrics"}
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: HPA {{ $labels.namespace }}/{{ $labels.horizontalpodautoscaler  }} has been running at max replicas for longer than 15 minutes.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubehpamaxedout
            summary: HPA is running at max replicas
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: bdfd19f6-fdef-5f72-9865-32e0bb2eb82d
          title: KubePdbNotEnoughHealthyPods
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (
                      kube_poddisruptionbudget_status_desired_healthy{job="kube-state-metrics"}
                      -
                      kube_poddisruptionbudget_status_current_healthy{job="kube-state-metrics"}
                    )
                    > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: PDB {{ $labels.namespace }}/{{ $labels.poddisruptionbudget }} expects {{ $value }} more healthy pods. The desired number of healthy pods has not been met for at least 15m.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepdbnotenoughhealthypods
            summary: PDB does not have enough healthy pods.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
    - orgId: 1
      name: kubernetes-resources
      folder: jkleinlerchertest/prometheus_alerts.yaml
      interval: 1m
      rules:
        - uid: 8b6577f5-93cf-5adf-9bf7-361912fc21e3
          title: KubeCPUOvercommit
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum(namespace_cpu:kube_pod_container_resource_requests:sum{}) - (sum(kube_node_status_allocatable{resource="cpu", job="kube-state-metrics"}) - max(kube_node_status_allocatable{resource="cpu", job="kube-state-metrics"})) > 0
                    and
                    (sum(kube_node_status_allocatable{resource="cpu", job="kube-state-metrics"}) - max(kube_node_status_allocatable{resource="cpu", job="kube-state-metrics"})) > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 10m
          annotations:
            description: Cluster has overcommitted CPU resource requests for Pods by {{ $value }} CPU shares and cannot tolerate node failure.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecpuovercommit
            summary: Cluster has overcommitted CPU resource requests.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 296b0b38-db9f-59a5-b14a-6e46cc4b4407
          title: KubeMemoryOvercommit
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum(namespace_memory:kube_pod_container_resource_requests:sum{}) - (sum(kube_node_status_allocatable{resource="memory", job="kube-state-metrics"}) - max(kube_node_status_allocatable{resource="memory", job="kube-state-metrics"})) > 0
                    and
                    (sum(kube_node_status_allocatable{resource="memory", job="kube-state-metrics"}) - max(kube_node_status_allocatable{resource="memory", job="kube-state-metrics"})) > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 10m
          annotations:
            description: Cluster has overcommitted memory resource requests for Pods by {{ $value | humanize }} bytes and cannot tolerate node failure.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubememoryovercommit
            summary: Cluster has overcommitted memory resource requests.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: ede836d9-77d2-5334-88f7-5fe1340b70b7
          title: KubeCPUQuotaOvercommit
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum(min without(resource) (kube_resourcequota{job="kube-state-metrics", type="hard", resource=~"(cpu|requests.cpu)"}))
                      /
                    sum(kube_node_status_allocatable{resource="cpu", job="kube-state-metrics"})
                      > 1.5
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 5m
          annotations:
            description: Cluster has overcommitted CPU resource requests for Namespaces.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecpuquotaovercommit
            summary: Cluster has overcommitted CPU resource requests.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: ba12dcf8-001f-5afb-83e7-323ad9ee7840
          title: KubeMemoryQuotaOvercommit
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum(min without(resource) (kube_resourcequota{job="kube-state-metrics", type="hard", resource=~"(memory|requests.memory)"}))
                      /
                    sum(kube_node_status_allocatable{resource="memory", job="kube-state-metrics"})
                      > 1.5
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 5m
          annotations:
            description: Cluster has overcommitted memory resource requests for Namespaces.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubememoryquotaovercommit
            summary: Cluster has overcommitted memory resource requests.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 60b42d18-eda9-5fc8-b2ad-2c1cc2606f88
          title: KubeQuotaAlmostFull
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_resourcequota{job="kube-state-metrics", type="used"}
                      / ignoring(instance, job, type)
                    (kube_resourcequota{job="kube-state-metrics", type="hard"} > 0)
                      > 0.9 < 1
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotaalmostfull
            summary: Namespace quota is going to be full.
          labels:
            __converted_prometheus_rule__: "true"
            severity: info
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 6a94eecd-271c-5af6-8929-f539fd409878
          title: KubeQuotaFullyUsed
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_resourcequota{job="kube-state-metrics", type="used"}
                      / ignoring(instance, job, type)
                    (kube_resourcequota{job="kube-state-metrics", type="hard"} > 0)
                      == 1
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotafullyused
            summary: Namespace quota is fully used.
          labels:
            __converted_prometheus_rule__: "true"
            severity: info
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 0c95fa9c-58f8-5676-8284-eecaf8653dc5
          title: KubeQuotaExceeded
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_resourcequota{job="kube-state-metrics", type="used"}
                      / ignoring(instance, job, type)
                    (kube_resourcequota{job="kube-state-metrics", type="hard"} > 0)
                      > 1
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Namespace {{ $labels.namespace }} is using {{ $value | humanizePercentage }} of its {{ $labels.resource }} quota.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubequotaexceeded
            summary: Namespace quota has exceeded the limits.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: b3edd7d3-c550-508e-b75b-8bd6b01d24c1
          title: CPUThrottlingHigh
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum(increase(container_cpu_cfs_throttled_periods_total{container!="", job="cadvisor", }[5m])) without (id, metrics_path, name, image, endpoint, job, node)
                      / on (cluster, namespace, pod, container, instance) group_left
                    sum(increase(container_cpu_cfs_periods_total{job="cadvisor", }[5m])) without (id, metrics_path, name, image, endpoint, job, node)
                      > ( 25 / 100 )
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: '{{ $value | humanizePercentage }} throttling of CPU in namespace {{ $labels.namespace }} for container {{ $labels.container }} in pod {{ $labels.pod }}.'
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-cputhrottlinghigh
            summary: Processes experience elevated CPU throttling.
          labels:
            __converted_prometheus_rule__: "true"
            severity: info
          isPaused: true
          missing_series_evals_to_resolve: 1
    - orgId: 1
      name: kubernetes-storage
      folder: jkleinlerchertest/prometheus_alerts.yaml
      interval: 1m
      rules:
        - uid: 1030b0fc-6906-50d6-bafa-3141cf0faa51
          title: KubePersistentVolumeFillingUp
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (
                      kubelet_volume_stats_available_bytes{job="kubelet"}
                        /
                      kubelet_volume_stats_capacity_bytes{job="kubelet"}
                    ) < 0.03
                    and
                    kubelet_volume_stats_used_bytes{job="kubelet"} > 0
                    unless on(cluster, namespace, persistentvolumeclaim)
                    kube_persistentvolumeclaim_access_mode{ access_mode="ReadOnlyMany"} == 1
                    unless on(cluster, namespace, persistentvolumeclaim)
                    kube_persistentvolumeclaim_labels{label_excluded_from_alerts="true"} == 1
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 1m
          annotations:
            description: The PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} {{ with $labels.cluster -}} on Cluster {{ . }} {{- end }} is only {{ $value | humanizePercentage }} free.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumefillingup
            summary: PersistentVolume is filling up.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 69137174-854f-5745-b98c-f822d6f5b8eb
          title: KubePersistentVolumeFillingUp
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (
                      kubelet_volume_stats_available_bytes{job="kubelet"}
                        /
                      kubelet_volume_stats_capacity_bytes{job="kubelet"}
                    ) < 0.15
                    and
                    kubelet_volume_stats_used_bytes{job="kubelet"} > 0
                    and
                    predict_linear(kubelet_volume_stats_available_bytes{job="kubelet"}[6h], 4 * 24 * 3600) < 0
                    unless on(cluster, namespace, persistentvolumeclaim)
                    kube_persistentvolumeclaim_access_mode{ access_mode="ReadOnlyMany"} == 1
                    unless on(cluster, namespace, persistentvolumeclaim)
                    kube_persistentvolumeclaim_labels{label_excluded_from_alerts="true"} == 1
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 1h
          annotations:
            description: Based on recent sampling, the PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} {{ with $labels.cluster -}} on Cluster {{ . }} {{- end }} is expected to fill up within four days. Currently {{ $value | humanizePercentage }} is available.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumefillingup
            summary: PersistentVolume is filling up.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: c1e9b44e-10be-5b48-812a-ce379583b4e3
          title: KubePersistentVolumeInodesFillingUp
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (
                      kubelet_volume_stats_inodes_free{job="kubelet"}
                        /
                      kubelet_volume_stats_inodes{job="kubelet"}
                    ) < 0.03
                    and
                    kubelet_volume_stats_inodes_used{job="kubelet"} > 0
                    unless on(cluster, namespace, persistentvolumeclaim)
                    kube_persistentvolumeclaim_access_mode{ access_mode="ReadOnlyMany"} == 1
                    unless on(cluster, namespace, persistentvolumeclaim)
                    kube_persistentvolumeclaim_labels{label_excluded_from_alerts="true"} == 1
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 1m
          annotations:
            description: The PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} {{ with $labels.cluster -}} on Cluster {{ . }} {{- end }} only has {{ $value | humanizePercentage }} free inodes.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeinodesfillingup
            summary: PersistentVolumeInodes are filling up.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: b47248fd-cf2c-5d62-be65-90bbc0ac9573
          title: KubePersistentVolumeInodesFillingUp
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (
                      kubelet_volume_stats_inodes_free{job="kubelet"}
                        /
                      kubelet_volume_stats_inodes{job="kubelet"}
                    ) < 0.15
                    and
                    kubelet_volume_stats_inodes_used{job="kubelet"} > 0
                    and
                    predict_linear(kubelet_volume_stats_inodes_free{job="kubelet"}[6h], 4 * 24 * 3600) < 0
                    unless on(cluster, namespace, persistentvolumeclaim)
                    kube_persistentvolumeclaim_access_mode{ access_mode="ReadOnlyMany"} == 1
                    unless on(cluster, namespace, persistentvolumeclaim)
                    kube_persistentvolumeclaim_labels{label_excluded_from_alerts="true"} == 1
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 1h
          annotations:
            description: Based on recent sampling, the PersistentVolume claimed by {{ $labels.persistentvolumeclaim }} in Namespace {{ $labels.namespace }} {{ with $labels.cluster -}} on Cluster {{ . }} {{- end }} is expected to run out of inodes within four days. Currently {{ $value | humanizePercentage }} of its inodes are free.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeinodesfillingup
            summary: PersistentVolumeInodes are filling up.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: a5ad04a2-b132-5c71-b4ac-94a4540c9a47
          title: KubePersistentVolumeErrors
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_persistentvolume_status_phase{phase=~"Failed|Pending",job="kube-state-metrics"} > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 5m
          annotations:
            description: The persistent volume {{ $labels.persistentvolume }} {{ with $labels.cluster -}} on Cluster {{ . }} {{- end }} has status {{ $labels.phase }}.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubepersistentvolumeerrors
            summary: PersistentVolume is having issues with provisioning.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
    - orgId: 1
      name: kubernetes-system
      folder: jkleinlerchertest/prometheus_alerts.yaml
      interval: 1m
      rules:
        - uid: cd98fd20-d276-550b-8c20-2597ca06ff3e
          title: KubeVersionMismatch
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    count by (cluster) (count by (git_version, cluster) (label_replace(kubernetes_build_info{job!~"kube-dns|coredns"},"git_version","$1","git_version","(v[0-9]*.[0-9]*).*"))) > 1
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: There are {{ $value }} different semantic versions of Kubernetes components running.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeversionmismatch
            summary: Different semantic versions of Kubernetes components running.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 3a101e42-6963-59f1-83a8-84236525fcc0
          title: KubeClientErrors
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (sum(rate(rest_client_requests_total{job="kube-apiserver",code=~"5.."}[5m])) by (cluster, instance, job, namespace)
                      /
                    sum(rate(rest_client_requests_total{job="kube-apiserver"}[5m])) by (cluster, instance, job, namespace))
                    > 0.01
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Kubernetes API server client '{{ $labels.job }}/{{ $labels.instance }}' is experiencing {{ $value | humanizePercentage }} errors.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclienterrors
            summary: Kubernetes API server client is experiencing errors.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
    - orgId: 1
      name: kubernetes-system-apiserver
      folder: jkleinlerchertest/prometheus_alerts.yaml
      interval: 1m
      rules:
        - uid: 3a9a66fa-eba0-5478-98b6-56e727b11041
          title: KubeClientCertificateExpiration
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    histogram_quantile(0.01, sum without (namespace, service, endpoint) (rate(apiserver_client_certificate_expiration_seconds_bucket{job="kube-apiserver"}[5m]))) < 604800
                    and
                    on(job, cluster, instance) apiserver_client_certificate_expiration_seconds_count{job="kube-apiserver"} > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 5m
          annotations:
            description: A client certificate used to authenticate to kubernetes apiserver is expiring in less than 7.0 days.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclientcertificateexpiration
            summary: Client certificate is about to expire.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 29009f1a-4e16-583a-bdb5-7be6200c05d9
          title: KubeClientCertificateExpiration
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    histogram_quantile(0.01, sum without (namespace, service, endpoint) (rate(apiserver_client_certificate_expiration_seconds_bucket{job="kube-apiserver"}[5m]))) < 86400
                    and
                    on(job, cluster, instance) apiserver_client_certificate_expiration_seconds_count{job="kube-apiserver"} > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 5m
          annotations:
            description: A client certificate used to authenticate to kubernetes apiserver is expiring in less than 24.0 hours.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeclientcertificateexpiration
            summary: Client certificate is about to expire.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 85c1ddf0-b08a-51f7-a052-91bf7b80b7b0
          title: KubeAggregatedAPIErrors
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum by(cluster, instance, name, reason)(increase(aggregator_unavailable_apiservice_total{job="kube-apiserver"}[1m])) > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 10m
          annotations:
            description: Kubernetes aggregated API {{ $labels.instance }}/{{ $labels.name }} has reported {{ $labels.reason }} errors.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeaggregatedapierrors
            summary: Kubernetes aggregated API has reported errors.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 9d83c8e6-698c-5ec5-a4fb-c86d130e554e
          title: KubeAggregatedAPIDown
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (1 - max by(name, namespace, cluster)(avg_over_time(aggregator_unavailable_apiservice{job="kube-apiserver"}[10m]))) * 100 < 85
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 5m
          annotations:
            description: Kubernetes aggregated API {{ $labels.name }}/{{ $labels.namespace }} has been only {{ $value | humanize }}% available over the last 10m.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeaggregatedapidown
            summary: Kubernetes aggregated API is down.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: cc2bf1f0-ba26-5022-8120-64422f8090df
          title: KubeAPIDown
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    absent(up{job="kube-apiserver"} == 1)
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: KubeAPI has disappeared from Prometheus target discovery.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapidown
            summary: Target disappeared from Prometheus target discovery.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: f6d39921-1223-5542-a32d-b8074056224f
          title: KubeAPITerminatedRequests
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum by(cluster) (rate(apiserver_request_terminations_total{job="kube-apiserver"}[10m])) / ( sum by(cluster) (rate(apiserver_request_total{job="kube-apiserver"}[10m])) + sum by(cluster) (rate(apiserver_request_terminations_total{job="kube-apiserver"}[10m])) ) > 0.20
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 5m
          annotations:
            description: The kubernetes apiserver has terminated {{ $value | humanizePercentage }} of its incoming requests.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeapiterminatedrequests
            summary: The kubernetes apiserver has terminated {{ $value | humanizePercentage }} of its incoming requests.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
    - orgId: 1
      name: kubernetes-system-controller-manager
      folder: jkleinlerchertest/prometheus_alerts.yaml
      interval: 1m
      rules:
        - uid: 1aea52b8-3038-51c9-8297-928ef8ffe2a8
          title: KubeControllerManagerDown
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    absent(up{job="kube-controller-manager"} == 1)
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: KubeControllerManager has disappeared from Prometheus target discovery.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubecontrollermanagerdown
            summary: Target disappeared from Prometheus target discovery.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
    - orgId: 1
      name: kubernetes-system-kube-proxy
      folder: jkleinlerchertest/prometheus_alerts.yaml
      interval: 1m
      rules:
        - uid: 56684f40-9f2d-5c8e-afda-08d52cd040f4
          title: KubeProxyDown
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    absent(up{job="kube-proxy"} == 1)
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: KubeProxy has disappeared from Prometheus target discovery.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeproxydown
            summary: Target disappeared from Prometheus target discovery.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
    - orgId: 1
      name: kubernetes-system-kubelet
      folder: jkleinlerchertest/prometheus_alerts.yaml
      interval: 1m
      rules:
        - uid: 89e0266a-aeff-56b8-966c-24f04920812a
          title: KubeNodeNotReady
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_node_status_condition{job="kube-state-metrics",condition="Ready",status="true"} == 0
                    and on (cluster, node)
                    kube_node_spec_unschedulable{job="kube-state-metrics"} == 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: '{{ $labels.node }} has been unready for more than 15 minutes.'
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodenotready
            summary: Node is not ready.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 11b733d1-2f12-5bd8-a589-5c1ae4dac8a0
          title: KubeNodePressure
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kube_node_status_condition{job="kube-state-metrics",condition=~"(MemoryPressure|DiskPressure|PIDPressure)",status="true"} == 1
                    and on (cluster, node)
                    kube_node_spec_unschedulable{job="kube-state-metrics"} == 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 10m
          annotations:
            description: '{{ $labels.node }} has active Condition {{ $labels.condition }}. This is caused by resource usage exceeding eviction thresholds.'
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodepressure
            summary: Node has as active Condition.
          labels:
            __converted_prometheus_rule__: "true"
            severity: info
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: ef36ead3-34fd-5fb0-8c4e-6740f811851e
          title: KubeNodeUnreachable
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (kube_node_spec_taint{job="kube-state-metrics",key="node.kubernetes.io/unreachable",effect="NoSchedule"} unless ignoring(key,value) kube_node_spec_taint{job="kube-state-metrics",key=~"ToBeDeletedByClusterAutoscaler|cloud.google.com/impending-node-termination|aws-node-termination-handler/spot-itn"}) == 1
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: '{{ $labels.node }} is unreachable and some workloads may be rescheduled.'
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodeunreachable
            summary: Node is unreachable.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: f64bdd4e-5999-539f-9e99-5a7292d52e50
          title: KubeletTooManyPods
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    (
                      max by (cluster, instance) (
                        kubelet_running_pods{job="kubelet"} > 1
                      )
                      * on (cluster, instance) group_left(node)
                      max by (cluster, instance, node) (
                        kubelet_node_name{job="kubelet"}
                      )
                    )
                    / on (cluster, node) group_left()
                    max by (cluster, node) (
                      kube_node_status_capacity{job="kube-state-metrics", resource="pods"} != 1
                    ) > 0.95
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Kubelet '{{ $labels.node }}' is running at {{ $value | humanizePercentage }} of its Pod capacity.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubelettoomanypods
            summary: Kubelet is running at capacity.
          labels:
            __converted_prometheus_rule__: "true"
            severity: info
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 34fce09b-e67a-57cb-9223-0070781c1add
          title: KubeNodeReadinessFlapping
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum(changes(kube_node_status_condition{job="kube-state-metrics",status="true",condition="Ready"}[15m])) by (cluster, node) > 2
                    and on (cluster, node)
                    kube_node_spec_unschedulable{job="kube-state-metrics"} == 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: The readiness status of node {{ $labels.node }} has changed {{ $value }} times in the last 15 minutes.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodereadinessflapping
            summary: Node readiness status is flapping.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: dd433730-962f-5890-8269-705020d1712d
          title: KubeNodeEviction
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    sum(rate(kubelet_evictions{job="kubelet"}[15m])) by(cluster, eviction_signal, instance)
                    * on (cluster, instance) group_left(node)
                    max by (cluster, instance, node) (
                      kubelet_node_name{job="kubelet"}
                    )
                    > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          annotations:
            description: Node {{ $labels.node }} is evicting Pods due to {{ $labels.eviction_signal }}.  Eviction occurs when eviction thresholds are crossed, typically caused by Pods exceeding RAM/ephemeral-storage limits.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubenodeeviction
            summary: Node is evicting pods.
          labels:
            __converted_prometheus_rule__: "true"
            severity: info
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 67e33619-1dfe-5f0a-8593-15a1bb0ede74
          title: KubeletPlegDurationHigh
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    node_quantile:kubelet_pleg_relist_duration_seconds:histogram_quantile{quantile="0.99"} >= 10
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 5m
          annotations:
            description: The Kubelet Pod Lifecycle Event Generator has a 99th percentile duration of {{ $value }} seconds on node {{ $labels.node }}.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletplegdurationhigh
            summary: Kubelet Pod Lifecycle Event Generator is taking too long to relist.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: a83fc134-e3e1-51e5-8e81-1dbf1ee4465d
          title: KubeletPodStartUpLatencyHigh
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    histogram_quantile(0.99, sum(rate(kubelet_pod_worker_duration_seconds_bucket{job="kubelet"}[5m])) by (cluster, instance, le)) * on(cluster, instance) group_left(node) kubelet_node_name{job="kubelet"} > 60
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Kubelet Pod startup 99th percentile latency is {{ $value }} seconds on node {{ $labels.node }}.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletpodstartuplatencyhigh
            summary: Kubelet Pod startup latency is too high.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: c23628c5-f0e3-5d0d-b06c-fea035ed5192
          title: KubeletClientCertificateExpiration
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kubelet_certificate_manager_client_ttl_seconds < 604800
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          annotations:
            description: Client certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificateexpiration
            summary: Kubelet client certificate is about to expire.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: bcfc0995-32d8-5713-ae50-070af48203bb
          title: KubeletClientCertificateExpiration
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kubelet_certificate_manager_client_ttl_seconds < 86400
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          annotations:
            description: Client certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificateexpiration
            summary: Kubelet client certificate is about to expire.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 0038877d-40d0-5a82-a78b-8f9e111d416f
          title: KubeletServerCertificateExpiration
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kubelet_certificate_manager_server_ttl_seconds < 604800
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          annotations:
            description: Server certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificateexpiration
            summary: Kubelet server certificate is about to expire.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: c398794d-13c5-50af-90db-3a3c856b3729
          title: KubeletServerCertificateExpiration
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    kubelet_certificate_manager_server_ttl_seconds < 86400
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          annotations:
            description: Server certificate for Kubelet on node {{ $labels.node }} expires in {{ $value | humanizeDuration }}.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificateexpiration
            summary: Kubelet server certificate is about to expire.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 32ada1db-f3c7-597c-8ef8-4248fad9b3ef
          title: KubeletClientCertificateRenewalErrors
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    increase(kubelet_certificate_manager_client_expiration_renew_errors[5m]) > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Kubelet on node {{ $labels.node }} has failed to renew its client certificate ({{ $value | humanize }} errors in the last 5 minutes).
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletclientcertificaterenewalerrors
            summary: Kubelet has failed to renew its client certificate.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: f6fff70c-5b8e-5f6f-a106-d4eb5993bfee
          title: KubeletServerCertificateRenewalErrors
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    increase(kubelet_server_expiration_renew_errors[5m]) > 0
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Kubelet on node {{ $labels.node }} has failed to renew its server certificate ({{ $value | humanize }} errors in the last 5 minutes).
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletservercertificaterenewalerrors
            summary: Kubelet has failed to renew its server certificate.
          labels:
            __converted_prometheus_rule__: "true"
            severity: warning
          isPaused: true
          missing_series_evals_to_resolve: 1
        - uid: 341f063b-142d-50ba-b7a5-d13e23dd11d1
          title: KubeletDown
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    absent(up{job="kubelet"} == 1)
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: Kubelet has disappeared from Prometheus target discovery.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeletdown
            summary: Target disappeared from Prometheus target discovery.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
    - orgId: 1
      name: kubernetes-system-scheduler
      folder: jkleinlerchertest/prometheus_alerts.yaml
      interval: 1m
      rules:
        - uid: 6892d3d9-bd5e-5a69-bce6-1258a15bfe11
          title: KubeSchedulerDown
          condition: threshold
          data:
            - refId: query
              queryType: prometheus
              relativeTimeRange:
                from: 660
                to: 60
              datasourceUid: grafanacloud-prom
              model:
                datasource:
                    type: prometheus
                    uid: grafanacloud-prom
                expr: |
                    absent(up{job="kube-scheduler"} == 1)
                instant: true
                intervalMs: 1000
                maxDataPoints: 43200
                range: false
                refId: query
            - refId: prometheus_math
              queryType: math
              datasourceUid: __expr__
              model:
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: is_number($query) || is_nan($query) || is_inf($query)
                intervalMs: 1000
                maxDataPoints: 43200
                refId: prometheus_math
                type: math
            - refId: threshold
              queryType: threshold
              datasourceUid: __expr__
              model:
                conditions:
                    - evaluator:
                        params:
                            - 0
                        type: gt
                datasource:
                    IsPrunable: false
                    access: ""
                    apiVersion: ""
                    basicAuth: false
                    basicAuthUser: ""
                    created: "0001-01-01T00:00:00Z"
                    database: ""
                    id: -100
                    isDefault: false
                    jsonData: {}
                    name: __expr__
                    readOnly: false
                    secureJsonData: {}
                    type: __expr__
                    uid: __expr__
                    updated: "0001-01-01T00:00:00Z"
                    url: ""
                    user: ""
                    withCredentials: false
                expression: prometheus_math
                intervalMs: 1000
                maxDataPoints: 43200
                refId: threshold
                type: threshold
          noDataState: OK
          execErrState: OK
          for: 15m
          annotations:
            description: KubeScheduler has disappeared from Prometheus target discovery.
            runbook_url: https://github.com/kubernetes-monitoring/kubernetes-mixin/tree/master/runbook.md#alert-name-kubeschedulerdown
            summary: Target disappeared from Prometheus target discovery.
          labels:
            __converted_prometheus_rule__: "true"
            severity: critical
          isPaused: true
          missing_series_evals_to_resolve: 1
