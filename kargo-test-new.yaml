apiVersion: kargo.akuity.io/v1alpha1
kind: Stage
metadata:
  annotations:
    argocd.argoproj.io/tracking-id: adn-team-a_team-a-kargo-test:kargo.akuity.io/Stage:team-a-kargo-test-kargo-project/test
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"kargo.akuity.io/v1alpha1","kind":"Stage","metadata":{"annotations":{"argocd.argoproj.io/tracking-id":"adn-team-a_team-a-kargo-test:kargo.akuity.io/Stage:team-a-kargo-test-kargo-project/test"},"name":"test","namespace":"team-a-kargo-test-kargo-project"},"spec":{"promotionTemplate":{"spec":{"steps":[{"config":{"checkout":[{"fromFreight":true,"path":"./src"},{"branch":"stages/test","create":true,"path":"./out"}],"repoURL":"https://github.com/suxess-it/team-a-kargo-test"},"uses":"git-clone"},{"config":{"path":"./out"},"uses":"git-clear"},{"config":{"inPath":"./src","outPath":"./out"},"uses":"copy"},{"as":"commit","config":{"message":"Kargo applied some changes","path":"./out"},"uses":"git-commit"},{"config":{"path":"./out","targetBranch":"stages/test"},"uses":"git-push"},{"config":{"apps":[{"name":"kargo-test-test","namespace":"adn-team-a","sources":[{"desiredCommitFromStep":"commit","repoURL":"https://github.com/suxess-it/team-a-kargo-test"}]}]},"uses":"argocd-update"}]}},"requestedFreight":[{"origin":{"kind":"Warehouse","name":"warehouse-kargo-test"},"sources":{"direct":true}}]}}
  creationTimestamp: "2024-10-19T12:01:17Z"
  finalizers:
  - kargo.akuity.io/finalizer
  generation: 10
  name: test
  namespace: team-a-kargo-test-kargo-project
  resourceVersion: "14038"
  uid: c12a43b1-323b-4498-85cd-4d630faa8a99
spec:
  promotionTemplate:
    spec:
      steps:
      - config:
          checkout:
          - fromFreight: true
            path: ./src
          - branch: stages/test
            create: true
            path: ./out
          repoURL: https://github.com/suxess-it/team-a-kargo-test
        uses: git-clone
      - config:
          path: ./out
        uses: git-clear
      - config:
          inPath: ./src
          outPath: ./out
        uses: copy
      - as: commit
        config:
          message: Kargo applied some changes
          path: ./out
        uses: git-commit
      - config:
          path: ./out
          targetBranch: stages/test
        uses: git-push
      - config:
          apps:
          - name: kargo-test-test
            namespace: adn-team-a
            sources:
            - desiredCommitFromStep: commit
              repoURL: https://github.com/suxess-it/team-a-kargo-test
        uses: argocd-update
  requestedFreight:
  - origin:
      kind: Warehouse
      name: warehouse-kargo-test
    sources:
      direct: true
status:
  freightHistory:
  - id: 620e1eb9e097d7485d6e88e1654b7f27b961b85a
    items:
      Warehouse/warehouse-kargo-test:
        commits:
        - author: Johannes Kleinlercher <johannes@kleinlercher.at>
          committer: GitHub <noreply@github.com>
          id: f10742ab7a2f068fd19e385312e5b6da56056b1a
          message: hat 4
          repoURL: https://github.com/suxess-it/team-a-kargo-test
        name: f717c932745598745c44e48e763cbca2c07638e0
        origin:
          kind: Warehouse
          name: warehouse-kargo-test
  - id: d7b2e16c41dab6375d958990c56ced74b08fa55e
    items:
      Warehouse/warehouse-kargo-test:
        commits:
        - author: Johannes Kleinlercher <johannes@kleinlercher.at>
          committer: GitHub <noreply@github.com>
          id: 73a1b46b77e31b3f9f7e1537ee9787f3608841b0
          message: new hat
          repoURL: https://github.com/suxess-it/team-a-kargo-test
        name: 5b3efe72899673d8218da757c400a3a88a438347
        origin:
          kind: Warehouse
          name: warehouse-kargo-test
  - id: 56535d43755f9f8a615a8b4e98f6bdbc85db2363
    items:
      Warehouse/warehouse-kargo-test:
        commits:
        - author: Johannes Kleinlercher <johannes@kleinlercher.at>
          committer: GitHub <noreply@github.com>
          healthCheckCommit: ee95d00d45f94ba411d046a8c902762c977ee5ce
          id: e80f3fa8375ce38c9691922d28f3105b9dd77610
          message: Update values.yaml
          repoURL: https://github.com/suxess-it/team-a-kargo-test
        name: 6739342195d1504e594ced1e085f2067fb2a4f76
        origin:
          kind: Warehouse
          name: warehouse-kargo-test
  freightSummary: f717c932745598745c44e48e763cbca2c07638e0
  health:
    output:
    - applicationStatuses:
      - Name: kargo-test-test
        Namespace: adn-team-a
        health:
          status: Healthy
        operationState:
          finishedAt: "2024-10-19T12:19:23Z"
          message: successfully synced (all tasks run)
          operation:
            info:
            - name: Reason
              value: Promotion triggered a sync of this Application resource.
            - name: kargo.akuity.io/freight-collection
              value: 620e1eb9e097d7485d6e88e1654b7f27b961b85a
            initiatedBy:
              automated: true
              username: kargo-controller
            retry: {}
            sync:
              revisions:
              - stages/test
              syncOptions:
              - CreateNamespace=true
          phase: Succeeded
          syncResult:
            revision: 7f1fdbab9c6746b6a5e8a7b8ddf6abcb7d16873f
            source:
              helm: {}
              repoURL: https://github.com/suxess-it/team-a-kargo-test
              targetRevision: stages/test
        sync:
          revision: 7f1fdbab9c6746b6a5e8a7b8ddf6abcb7d16873f
          status: Synced
    status: Healthy
  lastPromotion:
    finishedAt: "2024-10-19T12:19:23Z"
    freight:
      commits:
      - author: Johannes Kleinlercher <johannes@kleinlercher.at>
        committer: GitHub <noreply@github.com>
        id: f10742ab7a2f068fd19e385312e5b6da56056b1a
        message: hat 4
        repoURL: https://github.com/suxess-it/team-a-kargo-test
      name: f717c932745598745c44e48e763cbca2c07638e0
      origin:
        kind: Warehouse
        name: warehouse-kargo-test
    name: test.01jajbfh1yfamyer1hvcmhbx9k.f717c93
    status:
      currentStep: 5
      finishedAt: "2024-10-19T12:19:23Z"
      freight:
        commits:
        - author: Johannes Kleinlercher <johannes@kleinlercher.at>
          committer: GitHub <noreply@github.com>
          id: f10742ab7a2f068fd19e385312e5b6da56056b1a
          message: hat 4
          repoURL: https://github.com/suxess-it/team-a-kargo-test
        name: f717c932745598745c44e48e763cbca2c07638e0
        origin:
          kind: Warehouse
          name: warehouse-kargo-test
      freightCollection:
        id: 620e1eb9e097d7485d6e88e1654b7f27b961b85a
        items:
          Warehouse/warehouse-kargo-test:
            commits:
            - author: Johannes Kleinlercher <johannes@kleinlercher.at>
              committer: GitHub <noreply@github.com>
              id: f10742ab7a2f068fd19e385312e5b6da56056b1a
              message: hat 4
              repoURL: https://github.com/suxess-it/team-a-kargo-test
            name: f717c932745598745c44e48e763cbca2c07638e0
            origin:
              kind: Warehouse
              name: warehouse-kargo-test
      healthChecks:
      - config:
          apps:
          - desiredRevisions:
            - 7f1fdbab9c6746b6a5e8a7b8ddf6abcb7d16873f
            name: kargo-test-test
            namespace: adn-team-a
        uses: argocd-update
      phase: Succeeded
      state:
        commit:
          commit: 7f1fdbab9c6746b6a5e8a7b8ddf6abcb7d16873f
  observedGeneration: 10
  phase: Steady
